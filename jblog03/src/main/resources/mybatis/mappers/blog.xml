<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="blog">
	<!--블로그 생성 -->
	<insert id="insert" parameterType="blogvo">
		<![CDATA[
		insert
		  into blog
	    values (#{title}, #{image}, #{blogId})
		]]>
	</insert>

	<!-- 블로그 정보 가져오기 -->
	<select id="blogInfo" resultType="blogvo" parameterType="map">
		<![CDATA[
		select title, image, blog_id
		  from blog
		 where blog_id=#{blogId }
		]]>
	</select>

	<!--블로그 생성 -->
	<insert id="insertCategory" parameterType="categoryvo">
		<![CDATA[
		insert
		  into category
	    values (null, #{name}, #{description}, #{blogId})
		]]>
	</insert>

	<!-- 카테고리 정보 가져오기 -->
	<select id="categoryInfo" resultType="categoryvo"
		parameterType="blogvo">
		<![CDATA[
		select no, name, description
		  from category
		 where blog_id=#{blogId }
		]]>
	</select>

	<!-- 카테고리 이름으로 no 가져오기 -->
	<select id="categoryNo" resultType="categoryvo"
		parameterType="categoryvo">
		<![CDATA[
		select no
		  from category
		 where name=#{name }
		]]>
	</select>

	<!--글 작성 -->
	<insert id="insertPost" parameterType="postvo">
		<![CDATA[
		insert
		  into post
	    values (null, #{title}, #{contents}, #{categoryNo})
		]]>
	</insert>

	<!-- 카테고리에 맞는 post 정보 가져오기 -->
	<select id="postInfo" resultType="postvo"
		parameterType="categoryvo">
		<![CDATA[
		select no, title, contents
		  from post
		 where category_no=#{no }
		]]>
	</select>

</mapper>